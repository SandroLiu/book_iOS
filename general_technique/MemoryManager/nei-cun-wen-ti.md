# 内存问题

### 大小端问题
- 0x12345678 12 是高字节 78 是低字节
- 大端 低字节在内存高地址
 - 低字节 -------------- 高字节  
   
   0x12 0x34 0x56 0x78
 
- 小端 低字节在内存低地址
 - 低字节 ------------- 高字节
  
   0x78 0x56 0x34 0x12
 
- iOS是小端存储
 NSInteger m = 1234; 
 小端字节序列 0xd204000000000000  
 大端字节序列 0x00000000000004d2
 
 低字节 ----------- 高字节
 
 | 0  | 1   | 2   | 3   | 4   | 5   | 6   | 7   |
 | -- | --- | --- | --- | --- | --- | --- | --- |
 |0xd2| 0x04| 0x00| 0x00| 0x00| 0x00| 0x00| 0x00|
 

 
 转换成NSData打印为 0xd204
 uint8_t *mp = &m;
 mp[0] == 0xd2;
 mp[1] == 0x04;

### iOS内存寻址
  iOS不同变量是从高地址开始分配地址。同一个变量内是从低地址开始分配，即变量的首地址是指向变量内存的低地址，变量的低字节也是分配在低地址。
  
 
### NSString 内存优化

- 以字面量或`withString`结尾的方法创建的字符串是常量字符串
- 以`withFormat`结尾的方法创建的字符串分两种情况
  - 字符串内容是ASCII字符并且小于10位数，创建的是`NSTaggedPointerString`类型的字符串，此类型的指针存储的是值不是指针
  - 其余的创建的是`__NSCFString`正常的字符串
- 以`stringWithFormat`类方法创建的字符串内存为`autorelease`自动释放